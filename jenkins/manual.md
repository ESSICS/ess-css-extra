

## Problem description
All jobs are currently created inside the Jenkins portal by clicking and inserting code. Jenkins then generates a xml-file named config.xml specific to each job. The community edition, ess-ics production and development all very similar job-scripts to set up the workspace, download fresh clones, build, and compiling everything. But as the configurations are slightly different it means that there are currently a bunch of duplicated code and manual input. These jobs are hard to modify and to share to others and split up between different folders in horrid autogenerated structures.  

The idea is to collect the scripts that they have in common and automate a pipeline running them. Having just one core pipeline  that sets up the different needs for the different versions. Having all the configurations collected and condensed allows for easy sharing and allows the entire community to contribute and extend the script. It also makes it more robust and rigid towards changes as variables are easily set up and changed in the beginning of each file.  

The pipeline will show up as a job in the Jenkins menu. We want setting up the pipeline to have as little configuration as possible inside the Jenkins portal. No magic should happen in Jenkins. To copy the pipeline all you need to do is to link to the repo the jenkinsfile is in and the path to it from the repo-root.

The different versions job sets do mainly the same thing baring some initial and final steps. We want to bulk the core jobs together in to one pipeline and encapsulate it inside another bigger, version specific pipeline containing parameters for the specific environment and feed them to the core pipeline. Reducing 20+ different scriptfiles down to only 4 with minimal duplication of code.

---

## Step by step creating a pipeline
1.	Have Jenkins 2.x with pipeline and version control plugins installed
2.	Press “New Item” [top left]
3.	Choose name and the item type “Pipeline”
4.	In the menu furthest down called “pipeline” change the definition to “Pipeline script from SCM”
5.	Paste the url to the repo containing the Jenkinsfile and the path to it from within the repo

---

## Jenkinsfile syntax and tips for writing it

[Supported steps (predefined methods) for the jenkins file](https://jenkins.io/doc/pipeline/steps/) 
