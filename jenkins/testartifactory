pipeline {
  environment {
  serverID='artifactory-ess'
  artifacFolder='jespersfolder'
  buildSpace='css-ce'
  }
  agent {
    label 'css'
  }
  stages{
    stage('test artifact'){
      steps{
      dir("../${buildSpace}")
        script {
             def server = Artifactory.server "${serverID}"
             def uploadSpec = """{
               "files": [
                 {
                   "pattern": "org.csstudio.ess.product/repository/target/products/(*.tar.gz|*.zip)",
                   "pattern": "org.csstudio.ess.product/repository/target/products/*.zip",
                   "target": "CSSTest/${artifactFolder}/0.1"
                 }
               ]
             }"""
             server.upload(uploadSpec)
        }
      }
    }
  }
}
